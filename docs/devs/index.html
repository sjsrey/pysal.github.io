<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Developers</title><meta name=generator content="Hugo 0.79.1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=stylesheet href=https://pysal.org/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://pysal.org/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://pysal.org/plugins/highlight/hybrid.css><link rel=icon href=https://pysal.org/images/favicon.png type=image/x-icon><link href="https://fonts.googleapis.com/css?family=Inria%20Sans:300,400,700&display=swap" rel=stylesheet><style>:root{--primary-color:#00A8CC;--body-color:#ffffff;--text-color:#636363;--text-color-dark:#242738;--white-color:#ffffff;--light-color:#f8f9fa;--font-family:Inria Sans}</style><link rel=stylesheet href=https://pysal.org/css/style.min.css media=screen><script src=https://pysal.org/plugins/jquery/jquery-1.12.4.js></script><script src=https://pysal.org/plugins/jquery/jquery-ui.js></script><script src=https://pysal.org/plugins/bootstrap/bootstrap.min.js></script><script src=https://pysal.org/plugins/match-height/jquery.matchHeight-min.js></script><script src=https://pysal.org/plugins/highlight/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script></head><body><header class="shadow-bottom sticky-top bg-white"><nav class="navbar navbar-expand-md navbar-light"><div class=container><a class="navbar-brand px-2" href=/><img class=img-fluid src=https://pysal.org/pysal_nav_logo.svg alt=PySAL></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link text-dark" href=/>Home</a></li><li class=nav-item><a class="nav-link text-dark" href=/packages>Packages</a></li><li class=nav-item><a class="nav-link text-dark" href=/news>News</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle text-dark" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu><a class=dropdown-item href=/about>About Us</a>
<a class=dropdown-item href=/team>Team</a>
<a class=dropdown-item href=/community>Community Guidelines</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle text-dark" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Documentation</a><div class=dropdown-menu><a class=dropdown-item href=/docs/install>Installation</a>
<a class=dropdown-item href=/docs/users>User Docs</a>
<a class=dropdown-item href=/docs/devs>Developer Docs</a></div></li></ul></div></div></nav></header><section class="single section pb-0"><div class=container><div class=row><div class=col-lg-3><div class="bg-white pl-lg-4 py-4 pr-4 mb-5 mb-lg-0 sticky-top top-100 overflow-hidden"><ul class=list-styled><a class="d-block h4 back-btn" href=/></a><li data-nav-id=https://pysal.org/docs/ title=Documentation class=sidelist><a href=https://pysal.org/docs/>Documentation</a><ul><li data-nav-id=https://pysal.org/docs/devs/ title=Developers class="sidelist
active"><a href=https://pysal.org/docs/devs/>Developers</a></li><li data-nav-id=https://pysal.org/docs/install/ title=Install class=sidelist><a href=https://pysal.org/docs/install/>Install</a></li><li data-nav-id=https://pysal.org/docs/users/ title=Users class=sidelist><a href=https://pysal.org/docs/users/>Users</a></li></ul></li></ul></div></div><div class=col-lg-9><div class="p-lg-5 p-4 bg-white"><h2 class=mb-5>Developers</h2><div class=content><p>Developers for PySAL and its submodules are expected to follow <a href=https://github.com/pysal/pysal/wiki/GitHub-Standard-Operating-Procedures>Github
Standard Operating
Procedures</a>.</p><p>In order for packages to be included into PySAL as a submodule, it must
follow the Submodule Contract below:</p><h3 id=submodule-contract>Submodule Contract</h3><h4 id=python-version>Python Version</h4><ul><li>must support python 3.6 and 3.7.</li></ul><h4 id=structure>Structure</h4><ul><li>must be organized in a hierarchical fashion. More specifically:<ul><li><strong>tests</strong> should be inside of the package folder, rather than
outside.</li><li><strong>data</strong> within tests is only referred to by tests, and is used
as comparison output for testing.</li><li><strong>notebooks</strong> is outside of the package folder.</li></ul></li></ul><h4 id=documentation--testing>Documentation & Testing</h4><ul><li>must have unittesting on user-facing classes (those exposed by the
API)</li><li>must have docstrings for all user-facing functions</li><li>must run these tests nightly (using either
<a href=https://nightli.es>nightli.es</a> or CRON jobs on travis)</li><li>must have three notebooks in <code>notebooks</code></li><li>must host documentation (see the next section for guidelines of
building a doc website)</li></ul><h4 id=code-standards>Code Standards</h4><ul><li>must refer to data in <code>libpysal.examples</code></li><li>must only have module-level imports that the package supports in its
<code>requirements.txt</code></li><li>must write <code>from submodule import function</code> instead of
<code>import submodule.function</code> if it wants to use a function of a PySAL
submodule</li><li>all function-level imports (those made at the top of a function)
must be decorated with the <a href=https://github.com/pysal/libpysal/blob/master/libpysal/common.py#L104>requires
decorator</a>
or raises an explicit exception (i.e. <code>raise ImportError('this function requires "PACKAGE", which is not installed.</code>)) if its requirements are not met.</li><li>must be pep8 compliant. We recommend using
<a href=https://github.com/hhatto/autopep8>autopep8</a> to automatically
convert non-compliant code, and using
<a href=http://flake8.pycqa.org/en/latest/>flake8</a> thereafter.</li></ul><h4 id=release-instructions>Release Instructions</h4><p>The submodules are expected to release on <a href=https://pypi.org/>The Python Package Index (PyPI)</a>,
<a href=https://help.github.com/en/articles/creating-releases>github</a>, and <a href=https://conda-forge.org/>conda-forge</a>.
Detailed instructions of releasing a submodule can be found in <a href=https://github.com/pysal/submodule_template/wiki/Release-Instructions>the wiki page of pysal/submodule_template</a>.</p><h3 id=submodule-template>Submodule Template</h3><p>The repo
<a href=https://github.com/pysal/submodule_template>pysal/submodule_template</a>
provides a useful template for submodules covering:</p><ul><li><p>how to configure travis-CI dual tests: <a href=https://github.com/pysal/submodule_template/blob/master/.travis.yml>.travis.yml</a>
- assuming that <code>libpysal</code> is a dependency of the submodule, an example of dual travis-CI testing against <code>libpysal</code> is provided.
- basically, the dual testing configures travis-CI to test
against two versions of <code>libpysal</code>: pypi released stable
version and the github development version.</p></li><li><p>how to describes the metadata about the submodule:
<a href=https://github.com/pysal/submodule_template/blob/master/setup.py>setup.py</a></p></li><li><p>how to customize Sphinx input and output behavior for mimicking
<code>giddy</code>'s <a href=http://giddy.readthedocs.io/>online documentation</a>:
<a href=https://github.com/pysal/submodule_template/blob/master/doc/conf.py>doc/conf.py</a></p></li><li><p>how to structure the package:</p><pre><code>PACKAGE_NAME/
    LICENSE.txt
    README.txt
    setup.py
    .travis.yml
    PACKAGE_NAME/
        __init__.py
    notebooks/
    requirements.txt
    requirements_tests.txt
    requirements_docs.txt
    readthedocs.yml
    doc/
        Makefile
        conf.py
        index.rst
        installation.rst
        api.rst
        references.rst
        _static/
            references.bib
            pysal-styles.css
            images/
                pysal_favicon.ico
        _build/
</code></pre></li></ul><p>All the files in the <a href=https://github.com/pysal/submodule_template/tree/master/doc>doc/</a> directory together with
<a href=https://github.com/pysal/submodule_template/blob/master/requirements_docs.txt>requirements_docs.txt</a> and
<a href=https://github.com/pysal/submodule_template/blob/master/readthedocs.yml>readthedocs.yml</a>
are essential for building the online docs for the submodule. More
details are given below.</p><h3 id=PySAL-submodule-docs>Building an online documentation for the submodule mimicking <a href=http://giddy.readthedocs.io>giddy_docs</a></h3><p><img src=img/giddy_docs.png alt=giddy></p><p>We recommend building a documentation website for your package with:</p><ul><li><a href=http://www.sphinx-doc.org/en/master/>sphinx</a>, the <strong>Python
Documentation Generator</strong>, which semi-automatically creates
beautiful documentation.</li><li><a href=https://sphinx-bootstrap-theme.readthedocs.io/en/latest/README.html>sphinx_bootstrap_theme</a>,
a python package providing Sphinx themes which integrates the
Bootstrap CSS/JavaScript framework with various layout options.</li><li><a href=https://readthedocs.org/>readthedocs</a>, which pull the code from
the github repository, build documentation and host it for free. It
is capable of hosting multiple versions of documentation.</li><li>An alternative host of the documentation website to <a href=https://readthedocs.org/>readthedocs</a>
is <a href=https://pages.github.com/>Github Page</a>. The instruction of publishing the docs website with Github Page
will also be given.</li></ul><p>The workflow is briefly introduced as follows:</p><h4 id=set-up-a-sphinx-project>Set up a <code>sphinx</code> project</h4><ul><li><p>Install <code>sphinx</code>, <code>sphinx_bootstrap_theme</code> as well as several
<code>sphinx</code> extensions which are very useful in generating an elegant
and user-friendly online documentation from <code>pip</code>:</p><pre><code>pip install sphinx sphinx_bootstrap_theme sphinxcontrib-bibtex numpydoc
</code></pre></li><li><p>Instead of initializing a new <code>sphinx</code> project using the tool,
<strong>sphinx-quickstart</strong>, developers wishing to mimic the
<a href=http://giddy.readthedocs.io>giddy_docs</a> can use the templates
provided by the
<a href=https://github.com/pysal/submodule_template>pysal/submodule_template</a>
by copying its directory
<a href=https://github.com/pysal/submodule_template/tree/master/doc>doc/</a>
(together with all the files inside) to your submodule.</p><ul><li>Open the copy of
<a href=https://github.com/pysal/submodule_template/blob/master/doc/conf.py>doc/conf.py</a>
in your submodule, and change all the
<code>PACKAGE\_NAME</code> to your submodule name so that the
Sphinx input and output behavior of your submodule are
configured.</li><li>Open the copy of
<a href=https://github.com/pysal/submodule_template/blob/master/doc/Makefile>doc/Makefile</a>
and
<a href=https://github.com/pysal/submodule_template/blob/master/doc/make.bat>doc/make.bat</a>
in your submodule, and change the <code>PACKAGE\_NAME</code> to
your submodule name.</li></ul></li><li><p>Now the online docs should be rendered in the same fashion as
<a href=http://giddy.readthedocs.io>giddy_docs</a>. The next steps will be
to fill in the content.</p></li></ul><h4 id=creating-documentation-for-python-docstrings>Creating documentation for Python docstrings</h4><p>The pysal submodule is expected to contain two distinct forms of
documentation: inline and non-inline. Inline docs are contained in the
source code itself, in what are known as <em>docstrings</em>. Non-inline docs
are written in reStructuredText and their sources (such as
<a href=https://github.com/pysal/submodule_template/blob/master/doc/installation.rst>doc/installation.rst</a>)
are in the <code>doc/</code> directory.</p><h5 id=non-inline-documentation>Non-inline Documentation</h5><p>The non-inline docs should be written in
<a href=http://docutils.sourceforge.net/rst.html>reStructuredText(.rst)</a> and
their sources live in the <code>doc/</code> directory.
<code>sphinx</code> will create HTML (and LaTeX (for printable PDF
versions), ePub, etc) files from the .rst sources. Currently, four .rst
files are living in
<a href=https://github.com/pysal/submodule_template/tree/master/doc>doc/</a> of
<a href=https://github.com/pysal/submodule_template>pysal/submodule_template</a>,
each of which will be read and built into four HTML files by `sphinx`:</p><ul><li><a href=https://github.com/pysal/submodule_template/blob/master/doc/index.rst>doc/index.rst</a>:
landing page for the online documentation. Should contain a brief
introduction of the submodule.</li><li><a href=https://github.com/pysal/submodule_template/blob/master/doc/installation.rst>doc/installation.rst</a>:
installation page.</li><li><a href=https://github.com/pysal/submodule_template/blob/master/doc/api.rst>doc/api.rst</a>:
API reference page providing links to inline documentation with the
help of sphinx extensions
<a href=http://numpydoc.readthedocs.io>numpydoc</a>,
<a href=http://www.sphinx-doc.org/en/stable/ext/autodoc.html>sphinx.ext.autodoc</a>
and
<a href=http://www.sphinx-doc.org/en/stable/ext/autosummary.html>sphinx.ext.autosummary</a>.</li><li><a href=https://github.com/pysal/submodule_template/blob/master/doc/references.rst>doc/reference.rst</a>:
bibliography page capable of cross-referencing with the help of the
sphinx extension
<a href=http://sphinxcontrib-bibtex.readthedocs.io>sphinxcontrib-bibtex</a>.</li></ul><p>To add all of them to the navigation bar menu of the online docs, the
<a href=https://github.com/pysal/submodule_template/blob/master/doc/conf.py#L169>navbar_links
property</a>
in
<a href=https://github.com/pysal/submodule_template/blob/master/doc/conf.py>doc/conf.py</a>
needs to be properly configured. Follow the same procedure to add other
webpages to the online documentation of your submodule.</p><h5 id=inline-documentation>Inline Documentation</h5><p>The following Sphinx extensions are used for parsing inline <em>docstrings</em>
and semi-automatically pulling in documentation from docstrings:</p><ul><li><a href=http://numpydoc.readthedocs.io>numpydoc</a></li><li><a href=http://www.sphinx-doc.org/en/stable/ext/autodoc.html>sphinx.ext.autodoc</a></li><li><a href=http://www.sphinx-doc.org/en/stable/ext/autosummary.html>sphinx.ext.autosummary</a></li></ul><p>Since the extension <a href=http://numpydoc.readthedocs.io>numpydoc</a> is used,
it is recommended that the python <em>docstrings</em> in the submodule follow
the <a href=https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard>Numpy Docstring
Standard</a>.</p><p>To utilize the sphinx extension
<a href=http://www.sphinx-doc.org/en/stable/ext/autodoc.html>sphinx.ext.autodoc</a>
which could import the module, and pull in documentation from docstrings
in a semi-automatic way, you need to list all the classes/functions you
wish to expose to users. As shown in
<a href=https://github.com/pysal/submodule_template>pysal/submodule_template</a>,
we recommend organizing classes/functions and listing them in
<a href=https://github.com/pysal/submodule_template/blob/master/doc/api.rst>doc/api.rst</a>.
More specifically, open the copy of
<a href=https://github.com/pysal/submodule_template/blob/master/doc/api.rst>doc/api.rst</a>
in your submodule, and change <code>PACKAGE\_NAME</code> right after
the directive <code>currentmodule</code> to your submodule. Then, replace the
classes <code>giddy.markov.Markov</code> and <code>giddy.markov.Spatial_Markov</code> with the
classes and functions of the submodule.</p><h6 id=interactive-python-examples>Interactive Python examples</h6><p>It should be noted that the interactive Python examples in the docstring
are not required, but if given, they are required to follow the
<a href=https://docs.python.org/3.6/library/doctest.html>doctest</a> format and
pass all doctests. They can be checked together with unit testing using
`nose`: <code>nosetests --with-doctest submodule/</code></p><p>If <code>matplotlib</code> is imported in the interactive example, the
<a href=https://matplotlib.org/devel/plot_directive.html>plot directive</a>
should be used for including the matplotlib plot (a .png file) in the
html docs. An example is given in the
<a href=https://giddy.readthedocs.io/en/latest/generated/giddy.directional.Rose.html#giddy.directional.Rose>Rose</a>
API of the giddy docs.</p><h4 id=bibliography-and-cross-reference>Bibliography and cross-reference</h4><p>We leverage the functionality provided by the Sphinx extension for
BibTeX style citations -
<a href=http://sphinxcontrib-bibtex.readthedocs.io>sphinxcontrib-bibtex</a> to
quickly and conveniently build a bibliography list in the online docs.
The bibliography list is customized to only show those cited in the
online docs in
<a href=https://github.com/pysal/submodule_template/blob/master/doc/references.rst>doc/reference.rst</a>.
To properly create cross-reference and generate the bibliography list,
the followings are needed:</p><ul><li>update
<a href=https://github.com/pysal/submodule_template/blob/master/doc/_static/references.bib>doc/_static/references.bib</a>
with the relevant references of your submodule .</li><li>change the format of citations in <em>docstrings</em> and no-inline
documentation to follow <code>:cite:`Press2007</code> in which
<code>Press2007</code> is the key of a bibtex entry in
<a href>doc/_static/references.bib</a>.</li></ul><h4 id=generate-and-test-html-locally>Generate and test html locally</h4><p>Now that we have configured the behaviour of input and output of
<code>sphinx</code> and added the content, we can run the build locally
to test whether there is any issue and to see how the created html docs
looks like. Since we have
<a href=https://github.com/pysal/submodule_template/blob/master/doc/Makefile>doc/Makefile</a>
and
<a href=https://github.com/pysal/submodule_template/blob/master/doc/make.bat>doc/make.bat</a>,
we can achieve that very easily by running <code>make html</code>:</p><pre><code>make html
</code></pre><p>A <code>\_build</code> folder will be created where all the created
html files live. You can double click to open the html files in a
default browser to check the content and layout.</p><h4 id=building-versioning-and-hosting-the-docs-with-readthedocshttpsreadthedocsorg>Building, versioning, and hosting the docs with <a href=https://readthedocs.org/>readthedocs</a></h4><p>We recommend hosting the online docs with
<a href=https://readthedocs.org/>readthedocs</a> since it is free and able to
host and build multiple versions.</p><p>After signing in with github to <a href=https://readthedocs.org/>readthedocs</a>,
you can click <em>Import a Project</em> to import the submodule and start to
build the online docs. Up to now, it is possible that the docs building
will fail because of some configuration issues:</p><ul><li>Programming Language: change the <strong>Programming Language</strong> value to
<code>python</code>.</li><li>Python interpreter: since the submodule supports 3.X only, you need
to change the <strong>Python interpreter</strong> value from the default <code>CPython 2.x</code> to <code>CPython 3.x</code> in Admin-Advanced
Settings.</li><li>Docs building dependencies: since we are relying on the python
package
<a href=https://sphinx-bootstrap-theme.readthedocs.io/en/latest/README.html>sphinx_bootstrap_theme</a>
to build an elegant <a href=https://bootswatch.com/yeti/>bootstrap-Yeti</a>
website, we need to configure <code>readthedocs</code> to install
the package when building the docs. A successful example of
configuration is given with the help of a
<a href=https://github.com/pysal/submodule_template/blob/master/readthedocs.yml>readthedocs.yml</a>
and proper configuration of <a href=https://github.com/pysal/submodule_template/blob/master/setup.py#L22>tests and docs dependencies for
setup.py</a>.</li></ul><h4 id=publishing-the-docs-with-github-pagehttpspagesgithubcom>Publishing the docs with <a href=https://pages.github.com/>Github Page</a></h4><p>Publishing the documentation website wih <a href=https://pages.github.com/>Github Page</a> can avoid the
the additional efforts of configuring and debugging <a href=https://readthedocs.org/>readthedocs</a>
as the locally built webpages will be published. Follow the procedure below to set up:</p><ol><li>Assuming you already have a sphinx project for your submodule following the instructions above, and
assuming the name of the folder for this project is <code>doc</code>, what you need to do is
(1) rename <code>doc</code> to <code>docsrc</code>
(2) replace the old Makefile with <a href=https://github.com/pysal/submodule_template/blob/master/docsrc/Makefile>a new one from pysal/submodule_template</a>
(3) copy the folder <a href=https://github.com/pysal/submodule_template/tree/master/docs><code>docs</code></a> from pysal/submodule_template to your package</li><li>Generating the documentation html files locally by running <code>make html</code> from the command line (make sure you are currently in the <code>docsrc</code> directory).
Then run <code>make sync</code> to move the generated html files to the <code>docs</code> directory.</li><li><a href=https://github.blog/2016-08-22-publish-your-project-documentation-with-github-pages/>Update settings of your github repo</a> as seen below:
<img src="https://github.blog/wp-content/uploads/2016/08/47c2ecc4-6533-11e6-828a-91980daa7297.gif?fit=1360%2C500" alt=setting></li></ol><p>Having setting up the github page for your project documentation website, you need to follow procedure 2 (<code>make html</code> and <code>make sync</code>)
to update the website to reflect any changes you have made to the package.</p></div><footer class="section pb-0"><div class=container><div class=row><div class="col-md-8 text-md-left text-center"><p>© PySAL Developers</p></div><div class="col-md-4 text-md-right text-center"><ul class="list-inline mb-3"><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://twitter.com/pysal_devs><i class=ti-twitter-alt></i></a></li><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://github.com/pysal><i class=ti-github></i></a></li></ul></div></div></div></footer><script src=https://pysal.org/js/script.min.js></script></body></html>